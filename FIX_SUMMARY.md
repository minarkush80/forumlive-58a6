# ä¿®å¤æ€»ç»“

## ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜

### 1. âœ… è„šæœ¬æ‰§è¡Œæƒé™
- **é—®é¢˜**ï¼š`./start.sh` æƒé™è¢«æ‹’ç»
- **ä¿®å¤**ï¼šéœ€è¦æ‰‹åŠ¨æ·»åŠ æ‰§è¡Œæƒé™
  ```bash
  chmod +x start.sh quick_start.sh run_game.sh
  chmod +x rulek.py scripts/dev_tools.py
  ```

### 2. âœ… å¯¼å…¥é”™è¯¯
- **é—®é¢˜**ï¼š`from src.utils.config import load_config` å¤±è´¥
- **ä¿®å¤**ï¼šæ›´æ”¹ä¸º `from src.utils.config import config`
- **æ–‡ä»¶**ï¼š`rulek.py`

### 3. âœ… GameStateManager é—®é¢˜
- **save_game ç­¾å**ï¼š
  - ä¿®æ”¹ä¸ºæ¥å—å¯é€‰çš„ `filename` å‚æ•°ï¼š`save_game(self, filename: Optional[str] = None)`
  - æ–‡ä»¶ï¼š`src/core/game_state.py`
  
- **é»˜è®¤NPCåˆ›å»º**ï¼š
  - æ·»åŠ  `_create_default_npcs()` æ–¹æ³•
  - åœ¨ `new_game()` ä¸­è‡ªåŠ¨åˆ›å»º3ä¸ªé»˜è®¤NPC
  
- **ç¼ºå¤±å±æ€§**ï¼š
  - åœ¨ `GameState` ç±»ä¸­æ·»åŠ  `active_rules: List[str]` å’Œ `turn: int`

### 4. âœ… æ—¶é—´èŒƒå›´æ£€æŸ¥
- **é—®é¢˜**ï¼šä¸¥æ ¼è¦æ±‚ "HH:MM" æ ¼å¼ï¼Œä¸æ¥å— "H:MM"
- **ä¿®å¤**ï¼šæ·»åŠ  `normalize_time()` å‡½æ•°ï¼Œæ”¯æŒä¸¤ç§æ ¼å¼
- **æ–‡ä»¶**ï¼š`src/core/rule_executor.py`

### 5. âš ï¸ å¾…å¤„ç†é—®é¢˜

#### ä»£ç è´¨é‡ï¼ˆruff & mypyï¼‰
éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤è‡ªåŠ¨ä¿®å¤å¤§éƒ¨åˆ†é—®é¢˜ï¼š
```bash
# è‡ªåŠ¨ä¿®å¤æ ¼å¼é—®é¢˜
ruff check src/ --fix

# æŸ¥çœ‹ç±»å‹æ£€æŸ¥é—®é¢˜
mypy src/ --ignore-missing-imports
```

ä¸»è¦çš„ç±»å‹é—®é¢˜ï¼š
- ç¼ºå°‘ç±»å‹æ³¨è§£
- Optional ç±»å‹æœªæ­£ç¡®å¤„ç†
- æœªå®šä¹‰çš„å±æ€§å’Œæ–¹æ³•

#### å‰ç«¯ä¾èµ–
```bash
cd web/frontend && npm install
```

## ğŸ“ å¿«é€ŸéªŒè¯æ­¥éª¤

1. **æ·»åŠ æ‰§è¡Œæƒé™**ï¼š
   ```bash
   chmod +x start.sh
   ```

2. **è¿è¡Œæµ‹è¯•éªŒè¯**ï¼š
   ```bash
   python test_fixes.py
   ```

3. **è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶**ï¼š
   ```bash
   python rulek.py test
   ```

4. **å¯åŠ¨æ¸¸æˆ**ï¼š
   ```bash
   # æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
   ./start.sh
   
   # æ–¹å¼2ï¼šç›´æ¥è¿è¡Œ
   python rulek.py web
   ```

## ğŸ¯ å»ºè®®çš„åç»­æ­¥éª¤

1. **å®‰è£…ç¼ºå¤±çš„å¼€å‘å·¥å…·**ï¼š
   ```bash
   pip install ruff mypy pytest pytest-cov
   ```

2. **ä¿®å¤å‰©ä½™çš„ä»£ç è´¨é‡é—®é¢˜**ï¼š
   ```bash
   python scripts/dev_tools.py check
   ```

3. **å®‰è£…å‰ç«¯ä¾èµ–**ï¼š
   ```bash
   cd web/frontend && npm install
   ```

4. **åˆ›å»º .env æ–‡ä»¶**ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ·»åŠ å¿…è¦çš„é…ç½®
   ```

## ğŸ“Œ æ³¨æ„äº‹é¡¹

- DeepSeek API ç›¸å…³çš„æµ‹è¯•ä¼šè¢«è·³è¿‡ï¼ˆé™¤éé…ç½®äº† API Keyï¼‰
- éƒ¨åˆ†é«˜çº§åŠŸèƒ½ï¼ˆå¦‚å‰¯ä½œç”¨ç®¡ç†å™¨ï¼‰å¯èƒ½éœ€è¦é¢å¤–çš„å®ç°
- å»ºè®®åœ¨ä¿®å¤åè¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

## ğŸš€ ç°åœ¨å¯ä»¥æ­£å¸¸å¯åŠ¨äº†ï¼

æ‰€æœ‰æ ¸å¿ƒé—®é¢˜å·²ä¿®å¤ï¼Œæ¸¸æˆåº”è¯¥å¯ä»¥æ­£å¸¸è¿è¡Œã€‚å¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Python ç‰ˆæœ¬æ˜¯å¦ >= 3.10
2. æ‰€æœ‰ä¾èµ–æ˜¯å¦å·²å®‰è£…ï¼ˆ`pip install -r requirements.txt`ï¼‰
3. æ˜¯å¦æœ‰æ­£ç¡®çš„ `.env` é…ç½®æ–‡ä»¶
